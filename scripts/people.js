/**
 * @file DTPS course user list screen
 * @author jottocraft
 * 
 * @copyright Copyright (c) 2018-2021 jottocraft. All rights reserved.
 * @license GPL-2.0-only
 */
dtps.usersList=function(s){var e=dtps.classes.map((s=>s.id)).indexOf(s);dtps.selectedClass=e,dtps.selectedContent="people",$("#dtpsTabBar .btn").removeClass("active"),$("#dtpsTabBar .btn.people").addClass("active"),dtps.presentClass(e),dtps.showClasses(),-1==e&&dtps.error("The selected class doesn't exist","classNum check failed @ dtps.usersList"),dtps.selectedClass==e&&"people"==dtps.selectedContent&&jQuery(".classContent").html(`\n            <div style="--size: 250px; margin: 0px 20px;" class="grid flex">\n              <div class="block status card">\n                <h2 class="main"><span class="shimmer">--</span></h2>\n                <h5 class="bottom"><i class="fluid-icon">contact_page</i> Your section</h5>\n              </div>\n              <div class="block status">\n                <h2 class="main numFont"><span class="shimmer">--</span></h2>\n                <h5 class="bottom"><i class="fluid-icon">groups</i> Total Students</h5>\n              </div>\n              <div class="block status">\n                <h2 class="main numFont"><span class="shimmer">--</span></h2>\n                <h5 class="bottom"><i class="fluid-icon">school</i> Teachers</h5>\n              </div>\n            </div>\n            <div class="card">\n                <h5><b style="width: 300px; display: inline-block;" class="shimmer">Title</b></h5>\n                ${[1,2,3,4,5,6].map((()=>'\n                        <div>\n                            <p class="shimmerParent">\n                                <span style="width: 30px; height: 30px; outline: none; border-radius: 50%; display: inline-block; vertical-align: middle; margin-right: 5px;"></span>\n                                <a style="color: var(--text); vertical-align: middle;">User name</a>\n                            </p>\n                        </div>\n                    ')).join("")}\n            </div>\n        `),new Promise((s=>{dtps.classes[e].people&&!0!==dtps.classes[e].people?s(dtps.classes[e].people):dtpsLMS.fetchUsers(dtps.classes[e].lmsID).then((e=>s(e)))})).then((function(s){dtps.classes[e].people=s;var n=[],t=[],l=null;s.forEach((s=>{s.users.forEach((e=>{"Teachers"!=s.title||t.includes(e.id)?n.includes(e.id)||n.push(e.id):t.push(e.id),l||e.id!=dtps.user.id||(l=s.title)}))})),dtps.selectedClass==e&&"people"==dtps.selectedContent&&(s&&0!=s.length?jQuery(".classContent").html(`\n                    <div style="--size: 250px; margin: 0px 20px;" class="grid flex">\n                      <div class="block status card">\n                        <h2 style="white-space: nowrap;overflow: hidden;text-overflow: ellipsis;" class="main">${l||"--"}</h2>\n                        <h5 class="bottom"><i class="fluid-icon">contact_page</i> Your section</h5>\n                      </div>\n                      <div class="block status">\n                        <h2 class="main numFont">${n.length}</h2>\n                        <h5 class="bottom"><i class="fluid-icon">groups</i> Total Students</h5>\n                      </div>\n                      <div class="block status">\n                        <h2 class="main numFont">${t.length}</h2>\n                        <h5 class="bottom"><i class="fluid-icon">school</i> ${1==t.length?"Teacher":"Teachers"}</h5>\n                      </div>\n                    </div>\n                `+s.map((s=>`\n                        <div class="card">\n                            <h5><b>${s.title}</b></h5>\n                            ${s.users.map((s=>`\n                                    <div>\n                                        <p>\n                                            <img style="width: 30px; border-radius: 50%; vertical-align: middle; margin-right: 5px;" src="${s.photoURL}" />\n                                            <a href="${s.url}" style="color: var(--text); vertical-align: middle;">${s.name}</a>\n                                        </p>\n                                    </div>\n                                `)).join("")}\n                        </div>\n                    `)).join("")):jQuery(".classContent").html('\n                    <div style="cursor: auto;" class="card assignment">\n                        <h4>Error</h4>\n                        <p>Power+ could not get the list of people in this course</p>\n                    </div>\n                '))})).catch((function(s){dtps.error("Couldn't fetch users","Caught promise rejection @ dtps.usersList",s)}))},fluid.externalScreens.people=s=>{dtps.usersList(s)};
//# sourceMappingURL=/scripts/people.js.map